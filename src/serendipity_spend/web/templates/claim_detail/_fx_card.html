<div id="fx-card" class="sidebar-card" {% if oob %}hx-swap-oob="outerHTML"{% endif %}>
  <h3 class="sidebar-label">FX Rates</h3>
  {% if fx_error %}
    <div class="callout warning mb-1">Auto-fill unavailable. Enter rates manually.</div>
  {% endif %}
  {% if fx_invalid %}
    <div class="callout warning mb-1">{{ fx_invalid }}</div>
  {% endif %}
  {% if fx_skipped %}
    <div class="callout warning mb-1">Skipped invalid currency code(s): {{ fx_skipped }}</div>
  {% endif %}
  <form
    method="post"
    action="/app/claims/{{ claim.id }}/fx/auto"
    class="mb-1"
    hx-post="/app/claims/{{ claim.id }}/fx/auto"
    hx-target="#fx-card"
    hx-swap="outerHTML"
  >
    <button class="btn btn-sm" type="submit" style="width:100%;">Auto-fill rates</button>
  </form>
  <form
    method="post"
    action="/app/claims/{{ claim.id }}/fx"
    class="fx-form"
    hx-post="/app/claims/{{ claim.id }}/fx"
    hx-target="#fx-card"
    hx-swap="outerHTML"
  >
    {% if fx_currencies|length == 0 %}
      <div class="muted" style="font-size:12px;">No non-home currencies detected.</div>
    {% else %}
      {% for cur in fx_currencies %}
        <div class="fx-row">
          <label>{{ cur }}</label>
          <input name="fx_rate_{{ cur }}" value="{{ fx_values.get(cur, '') }}" placeholder="e.g. 1.35" />
        </div>
      {% endfor %}
    {% endif %}
    <button class="btn btn-sm mt-1" type="submit" style="width:100%;">Save rates</button>
  </form>
</div>

